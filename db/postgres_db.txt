CREATE SEQUENCE category_seq;

CREATE TABLE category (
  id int NOT NULL DEFAULT NEXTVAL ('category_seq'),
  name varchar(45) NOT NULL,
  PRIMARY KEY (id)
)   ;

ALTER SEQUENCE category_seq RESTART WITH 5;

INSERT INTO category VALUES (1,'DIEN THOAI'),(2,'MAY TINH BANG'),(3,'LAPTOP'),(4,'PHỤ KIỆN');

CREATE SEQUENCE manufacturer_seq;

CREATE TABLE manufacturer (
  id int NOT NULL DEFAULT NEXTVAL ('manufacturer_seq'),
  name varchar(45) NOT NULL,
  country varchar(45) NOT NULL,
  PRIMARY KEY (id)
)  ;

CREATE SEQUENCE product_seq;

CREATE TABLE product (
  id int NOT NULL DEFAULT NEXTVAL ('product_seq'),
  name varchar(45) NOT NULL,
  price decimal(10,0) DEFAULT '0',
  category_id int NOT NULL,
  description text,
  PRIMARY KEY (id)
 ,
  CONSTRAINT fk_product_category FOREIGN KEY (category_id) REFERENCES category (id)
)   ;

ALTER SEQUENCE product_seq RESTART WITH 5;

CREATE INDEX fk_product_category_idx ON product (category_id);

CREATE SEQUENCE prod_manufacturer_seq;

CREATE TABLE prod_manufacturer (
  id int NOT NULL DEFAULT NEXTVAL ('prod_manufacturer_seq'),
  product_id int NOT NULL,
  manufacturer_id int NOT NULL,
  PRIMARY KEY (id)
 ,
  CONSTRAINT fk_manufacturer FOREIGN KEY (manufacturer_id) REFERENCES manufacturer (id),
  CONSTRAINT fk_product FOREIGN KEY (product_id) REFERENCES product (id)
)  ;

CREATE INDEX fk_product_idx ON prod_manufacturer (product_id);
CREATE INDEX fk_manufacturer_idx ON prod_manufacturer (manufacturer_id);

INSERT INTO product VALUES (1,'Iphone 7 Plus',16,1,'64GB, Apple'),(2,'Galaxy note 10',24,1,'64GB, Samsung'),(3,'Ipad pro 11',18,2,'128GB, Apple'),(4,'Sangsung tab s6',20,2,'128GB, Samsung');